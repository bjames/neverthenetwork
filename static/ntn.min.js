var static_count=10;var variable_count=static_count;var timer=null;var curr_active=null;var paused=false;$(document).ready(function(){load_anchor();watch();$("#app").submit(function(a){a.preventDefault();submit_form()});$("#watch").click(function(){watch()});$("#dns_nav").click(function(){active(this);load_app("dns","DNS");enable_watch()});$("#subnet_nav").click(function(){active(this);load_app("subnet","Subnet");disable_watch()});$("#curl_nav").click(function(){active(this);load_app("curl","cURL");enable_watch()});$("#oui_nav").click(function(){active(this);load_app("oui","OUI");disable_watch()});$("#ping_nav").click(function(){active(this);load_app("ping","Ping");enable_watch()});$("#traceroute_nav").click(function(){active(this);load_app("traceroute","Traceroute");enable_watch()});$("#clear_scrollback").click(function(){$("#term").empty()});$("#nav_icon").click(function(){response_navbar()})});function disable_watch(){$("#watch").attr("disabled",true);$("#watch").attr("checked",false);$("#timer").css("visibility","hidden");clearInterval(timer)}function enable_watch(){$("#watch").attr("disabled",false)}function active(a){if(curr_active!=null){$(curr_active).attr("class","")}curr_active=a;$(a).attr("class","active")}function start_timer(){timer=setInterval(function(){countdown();$("#timer").css("visibility","visible")},1000)}function countdown(a){if(!paused){variable_count=variable_count-1;document.getElementById("timer").innerHTML=variable_count;if(variable_count==0){paused=true;submit_form();variable_count=static_count}}}function watch(){var a=$("#watch").is(":checked");if(a){variable_count=static_count;start_timer()}else{try{clearInterval(timer);$("#timer").css("visibility","hidden")}catch(b){}}}function submit_form(){var a=document.getElementById("app").firstChild;classes=a.classList;$("#submit_app").attr("disabled",true);$("#term").addClass("spinner");if(classes.contains("curl")){$.ajax({url:"curl",type:"post",cache:false,data:$("[name=url]"),success:function(b){post_success(b)},error:function(){post_failed()}})}else{if(classes.contains("dns")){$.ajax({url:"dns",type:"post",cache:false,data:{dns_lookup:$("[name=dns_lookup]").val(),record_type:$("[name=record_type]").val(),user_resolver:$("[name=user_resolver]").val()},success:function(b){post_success(b)},error:function(){post_failed()}})}else{if(classes.contains("subnet")){$.ajax({url:"subnet",type:"post",cache:false,data:{ip_address:$("[name=ip_address]").val(),subnet_mask:$("[name=subnet_mask]").val()},success:function(b){post_success(b)},error:function(){post_failed()}})}else{if(classes.contains("oui")){$.ajax({url:"oui",type:"post",cache:false,data:$("[name=mac_address]"),success:function(b){post_success(b)},error:function(){post_failed()}})}else{if(classes.contains("ping")){$.ajax({url:"ping",type:"post",cache:false,data:$("[name=hostname]"),success:function(b){post_success(b)},error:function(){post_failed()}})}else{if(classes.contains("traceroute")){$.ajax({url:"traceroute",type:"post",cache:false,data:$("[name=hostname]"),success:function(b){post_success(b)},error:function(){post_failed()}})}}}}}}}function post_success(a){console.log("post success");update_term(a);paused=false;$("#submit_app").attr("disabled",false);$("#term").removeClass("spinner")}function post_failed(){paused=false;$("#submit_app").attr("disabled",false);$("#term").removeClass("spinner")}function update_term(a){$("#term").append(a);var b=document.getElementById("term");b.scrollTop=b.scrollHeight}function load_app(b,a){$("#app").load(b+" #app");active($("#"+b+"_nav"));document.title="NTN - "+a}function load_anchor(){console.log(window.location.pathname);switch($(location).attr("hash")){case"#curl":load_app("curl","cURL");enable_watch();break;case"#dns":load_app("dns","DNS");enable_watch();break;case"#subnet":load_app("subnet","Subnet");break;case"#oui":load_app("oui","OUI");break;case"#ping":load_app("ping","Ping");enable_watch();break;case"#traceroute":load_app("traceroute","Traceroute");enable_watch();break}}function response_navbar(){var a=document.getElementById("navbar");if(a.className==="navbar"){a.className+=" responsive"}else{a.className="navbar"}};